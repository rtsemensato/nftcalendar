{"ast":null,"code":"import _regeneratorRuntime from \"C:/projetosEstudo/nftcalendar/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"C:/projetosEstudo/nftcalendar/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\projetosEstudo\\\\nftcalendar\\\\src\\\\pages\\\\login\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { IoEye, IoEyeOff } from \"react-icons/io5\";\nimport cogoToast from \"cogo-toast\";\nimport axios from \"axios\";\nimport { useLogin } from \"../../contexts/LoginContext\";\nimport styles from \"./styles.module.scss\";\nexport default function Login() {\n  _s();\n\n  var _useLogin = useLogin(),\n      login = _useLogin.login;\n\n  var _useState = useState(false),\n      isPasswordVisible = _useState[0],\n      setIsPasswordVisible = _useState[1];\n\n  var router = useRouter();\n  var loginInput = useRef(null);\n  var passwordInput = useRef(null);\n  useEffect(function () {\n    loginInput.current.focus();\n  }, []);\n\n  function handleFormSubmit(_x) {\n    return _handleFormSubmit.apply(this, arguments);\n  }\n\n  function _handleFormSubmit() {\n    _handleFormSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var user, config, baseUrl, apiLocal, _yield$apiLocal$get, status, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              user = {\n                idUsuario: loginInput.current.value,\n                sLogin: passwordInput.current.value\n              };\n              config = {\n                headers: {\n                  user: user.idUsuario,\n                  password: user.sLogin\n                }\n              };\n              _context.prev = 3;\n              baseUrl = \"http://\".concat(window.location.hostname, \":5100/\");\n              apiLocal = axios.create({\n                baseURL: baseUrl\n              });\n              _context.next = 8;\n              return apiLocal.get(\"authenticate\", config);\n\n            case 8:\n              _yield$apiLocal$get = _context.sent;\n              status = _yield$apiLocal$get.status;\n              data = _yield$apiLocal$get.data;\n\n              if (status === 200) {\n                localStorage.setItem(\"@nftcalendar/token\", data.stoken);\n                localStorage.setItem(\"@nftcalendar/userId\", data.user.idUsuario);\n                localStorage.setItem(\"@nftcalendar/userName\", data.user.sLogin);\n                login(data.user.idUsuario, data.user.sLogin);\n                router.push(\"/apes-local/home\");\n              }\n\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](3);\n              cogoToast.error(\"Usuário ou senha inválidos\");\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 14]]);\n    }));\n    return _handleFormSubmit.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.loginContainer,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleFormSubmit,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/nova-logo.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"login\",\n            className: styles.login,\n            ref: loginInput,\n            required: true,\n            autoComplete: \"off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"login\",\n            children: \"Usu\\xE1rio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.inputContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: isPasswordVisible ? \"text\" : \"password\",\n            id: \"password\",\n            className: styles.password,\n            autoComplete: \"off\",\n            ref: passwordInput,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 7\n          }, this), isPasswordVisible ? /*#__PURE__*/_jsxDEV(IoEyeOff, {\n            onClick: function onClick() {\n              return setIsPasswordVisible(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(IoEye, {\n            onClick: function onClick() {\n              return setIsPasswordVisible(true);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Login, \"I4CgQws4J5iZxL106aYiB1lFeeg=\", false, function () {\n  return [useLogin, useRouter];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/projetosEstudo/nftcalendar/src/pages/login/index.tsx"],"names":["React","useEffect","useRef","useState","useRouter","IoEye","IoEyeOff","cogoToast","axios","useLogin","styles","Login","login","isPasswordVisible","setIsPasswordVisible","router","loginInput","passwordInput","current","focus","handleFormSubmit","event","preventDefault","user","idUsuario","value","sLogin","config","headers","password","baseUrl","window","location","hostname","apiLocal","create","baseURL","get","status","data","localStorage","setItem","stoken","push","error","loginContainer","inputContainer"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { IoEye, IoEyeOff } from \"react-icons/io5\";\nimport cogoToast from \"cogo-toast\";\nimport axios from \"axios\";\n\nimport { useLogin } from \"../../contexts/LoginContext\";\n\nimport styles from \"./styles.module.scss\";\n\nexport default function Login() {\n\tconst { login } = useLogin();\n\tconst [isPasswordVisible, setIsPasswordVisible] = useState(false);\n\tconst router = useRouter();\n\tconst loginInput = useRef(null);\n\tconst passwordInput = useRef(null);\n\n\tuseEffect(() => {\n\t\tloginInput.current.focus();\n\t}, []);\n\n\tasync function handleFormSubmit(event: React.FormEvent) {\n\t\tevent.preventDefault();\n\n\t\tconst user = {\n\t\t\tidUsuario: loginInput.current.value,\n\t\t\tsLogin: passwordInput.current.value,\n\t\t};\n\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\tuser: user.idUsuario,\n\t\t\t\tpassword: user.sLogin,\n\t\t\t},\n\t\t};\n\n\t\ttry {\n\t\t\tconst baseUrl = `http://${window.location.hostname}:5100/`;\n\n\t\t\tconst apiLocal = axios.create({\n\t\t\t\tbaseURL: baseUrl,\n\t\t\t});\n\n\t\t\tconst { status, data } = await apiLocal.get(\"authenticate\", config);\n\n\t\t\tif (status === 200) {\n\t\t\t\tlocalStorage.setItem(\"@nftcalendar/token\", data.stoken);\n\t\t\t\tlocalStorage.setItem(\"@nftcalendar/userId\", data.user.idUsuario);\n\t\t\t\tlocalStorage.setItem(\"@nftcalendar/userName\", data.user.sLogin);\n\t\t\t\tlogin(data.user.idUsuario, data.user.sLogin);\n\t\t\t\trouter.push(\"/apes-local/home\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcogoToast.error(\"Usuário ou senha inválidos\");\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={styles.loginContainer}>\n\t\t\t<form onSubmit={handleFormSubmit} autoComplete=\"off\">\n\t\t\t\t<div>\n\t\t\t\t\t<img src=\"/nova-logo.png\" />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div className={styles.inputContainer}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tid=\"login\"\n\t\t\t\t\t\t\tclassName={styles.login}\n\t\t\t\t\t\t\tref={loginInput}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label htmlFor=\"login\">Usuário</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.inputContainer}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype={isPasswordVisible ? \"text\" : \"password\"}\n\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\tclassName={styles.password}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tref={passwordInput}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label htmlFor=\"password\">Senha</label>\n\t\t\t\t\t\t{isPasswordVisible ? (\n\t\t\t\t\t\t\t<IoEyeOff onClick={() => setIsPasswordVisible(false)} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IoEye onClick={() => setIsPasswordVisible(true)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button>Login</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}